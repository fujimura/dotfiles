#! /usr/bin/env python

import subprocess
import re

branch_name = subprocess.run(['git', 'log', '--pretty=%s', '-1'],
                             capture_output=True,
                             encoding='utf-8').stdout.strip().lower()

branch_name = re.sub(r'[^a-zA-Z0-9]', '-', branch_name)
branch_name = re.sub(r'-+', '-', branch_name)
branch_name = re.sub(r'^-|-$', '', branch_name)

subprocess.call(f'git checkout -b {branch_name}', shell=True)
